title: 前后端分离的契约：接口文档
date: 2015-04-25 15:54:30
tags:
- RAP
- RESTful
- mock
- api

categories: 团队协作
---

最近在公司开发部举办了一次关于前后端配合为主题的研（si）讨(b)会，主要矛盾还是针对前后端协作所使用的接口文档随意变更问题。
<!--more-->
其实，接口文档是在我们前后端分离后产生的一个文档，现在的前端基于Angularjs，以Ajax的方式向后端暴露的RESTful接口进行调用，这就要求，在前后端各自开发的过程中如何尽可能的摆脱跨端的依赖。

最直观的方案，就是在设计阶段中产生一个接口文档，在编码阶段开发人员根据分工各自根据接口文档进行功能的实现。这本来是一套简单可爱的流程，不过由于我们在设计阶段所暴露的问题导致了混乱产生：

- 经验不足，无法一次性就设计出完美的接口
- 时间不够
- 认知问题，对接口文档重视程度不够

经过几个小时的撕逼，基本上大家统一了一些基础观念，把接口文档当做是契约，在确定后严格履行其声明。

不过，只是解决了认知问题远远不够，光有接口文档也是不能达到理想状态：

- 拒绝写文档的繁琐
- 尽可能的摆脱依赖

好，第一个问题，我们需要一个足够“程序员化”的接口文档编写工具，找了找，发现一个轻量级的工具不错：[APIDOC](http://apidocjs.com/)。

该工具针对RESTful风格的api，提供了多种语言的支持，而且基于码农擅长的注解方式完成接口的声明，十分贴心。而且，可以自动导出成html，方便部署在各种环境下。

美中不足的是，它没有提供MOCK功能，自带的模拟请求也需要依赖后端服务。不过我依然推荐的理由是：真的很简单。

跟我们的开发人员商量了一下，发现前端人员对mock数据的需求非常强烈，这让我不得不忍痛放弃APIDOC，继续寻找油腻的师姐。

知乎上我看有人推荐一款工具：[RAP](http://thx.github.io/RAP/)，阿里吊炸天啊~

RAP不仅提供了对Mock的完美支持，而且还加入了一些组织结构的功能用于满足团队的使用。

不过就是复杂一些，还好官方提供了视频教学。目前能想到的遗憾之处，就是不像APIDOC那样，可以方便的直接作为接口文档开放给所有第三方使用。