title: yum remove害死人
date: 2018-12-20 09:37:12
tags:
- centos
- yum
- rpm
categories: 运维
---

前几天犯了个天大的错，简单的说就是我把公司线上服务器的nginx卸载了。。。然后整整花了将近7个小时才让公司的系统重新上线！
我想如果在BAT，我肯定要滚蛋了~~

事情的缘由比较啰嗦就不细说了，主要说一下我是如何干掉nginx的吧，哈哈哈：

```
yum remove GeoIP -y
```

我本来是打算删除这个库的，执行完命令后它竟然把依赖它的其它软件也给删除了。。。。
当然，重新安装nginx分分钟的事儿，之所以停机7小时是因为它还删除了一些网络相关的库，导致我们的aws ec2的节点无法ssh。。。

不过重点是，`yum remove`会删除依赖的库，这就有点尴尬了，搜了一下，网上推荐使用`rpm -e --nodeps xxx`这种删除软件的命令。
你是不是也是第一次听说这个问题呢？想想我以前干的事儿，真的有点小激动呢。。。。
