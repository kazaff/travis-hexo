<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="coder,leader,tinker"><meta name="keywords" content><meta name="author" content="kazaff,edisondik@gmail.com"><meta name="copyright" content="kazaff"><title>要相信，一切都是最好的安排~ | kazaff's blog</title><link rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  hexoVersion: '3.9.0'
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="false"><div class="author-info"><div class="author-info__avatar text-center"><img src="/img/avatar.jpg"></div><div class="author-info__name text-center">kazaff</div><div class="author-info__description text-center">coder,leader,tinker</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">198</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">431</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">20</span></a></div></div></div><nav id="nav" style="background-image: url(/img/banner.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">kazaff's blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"></span></div><div id="site-info"><div id="site-title">kazaff's blog<div id="site-title-white"></div></div><div id="site-sub-title">要相信，一切都是最好的安排~</div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/2021/09/23/你写的代码是否无处安放-上/">你写的代码是否无出安放-上</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 9月 23 2021</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/架构/">架构</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/前后端分离/">前后端分离</a></span><div class="content">其实一直想聊一下这个话题，主要想表达什么呢？我见过公司里一些开发新人，他们总是抱着一个MVC三层架构死不放，只会将代码粗颗粒度的摆放在这三层中的某一层。因为大概率下是不会放错的，毕竟MVC的年龄可能比他们本身都大，总不会被否定吧？！
但其实在实际开发过程中，还是存在很多“到底放那一层更合适”的抉择的，如果能停下来多思考一下，对开发人员来说一定是意义的。而且就我个人的经验而言，多思考这个问题也是非常 ...</div><a class="more" href="/2021/09/23/你写的代码是否无处安放-上/#more" style="margin-top: 14px">Read more</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2021/09/18/面对无休止的需求讨论会议的反思1/">面对无休止的需求讨论会议的反思1</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 9月 18 2021</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/需求分析/">需求分析</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/需求分析/">需求分析</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/会议/">会议</a></span><div class="content">不知道大家参与，甚至负责过的复杂业务需求分析都是怎么顺利完成交付的？有没有碰到最近发生在我身边的这种情况呢？翻来覆去，没完没了的需求分析会议，感觉真的就这样会一直无休无止的持续下去！
你可能会有如下几个疑问：

业务真的那么复杂？没有任何业务专家能够讲清楚？
模型真的那么创新？毫无竞品参考？
内容真的那么庞大？上天入地，跨行跨业？
干系人真的那么多？几百上千？沟通不完？

好像都没有。而且不光是没 ...</div><a class="more" href="/2021/09/18/面对无休止的需求讨论会议的反思1/#more" style="margin-top: 14px">Read more</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2021/09/13/vscode突然不智能了怎么办/">Vscode突然不智能了怎么办</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 9月 13 2021</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/工具/">工具</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/vscode/">vscode</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/卸载/">卸载</a></span><div class="content">自从被人推荐开始使用微软的VSCODE，基本上已经不再使用其它任何同类工具了。。。可见我对它的满意度有多高~~但今天它却给我的热情狠狠的来了一击，对，没错，它突然罢工了。。。
表现为，不识别任何语言，虽然代码着色还在，但是却不提供任何自动提示，以及快速跳转等高级功能。没错，它现在和彩色的记事本没差别~~网上也没有搜到我这种情况，怎么就突然病了呢？我今天甚至都没有做什么新的操作。。找了一圈也没有看到 ...</div><a class="more" href="/2021/09/13/vscode突然不智能了怎么办/#more" style="margin-top: 14px">Read more</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2021/04/04/这只猴子有点油/">这只猴子有点油</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 4月 4 2021</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/前端/">前端</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/tampermonkey/">tampermonkey</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/油猴/">油猴</a></span><div class="content">久仰大名Tampermonkey（油猴），之前一直没有机会用在工作中，所以一直都只是知道有这么个强大的东西。前段时间在和我们的客户讨论需求时，根据对方的描述，我觉得必须要油猴出马了。有了动机，接下来就是学习，油猴的开发文档内容非常精炼，基本上30分钟就能通读完毕（上次让我有这种感叹的，应该是Vuejs）。而之所以内容篇幅很小，我猜应该是因为“大道至简”吧，工作越久就越发能体会到这个概念的伟大，概括 ...</div><a class="more" href="/2021/04/04/这只猴子有点油/#more" style="margin-top: 14px">Read more</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2021/03/22/centos7下安装puppeteer/">Centos7下安装puppeteer</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 3月 22 2021</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/运维/">运维</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/centos/">centos</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/puppeteer/">puppeteer</a></span><div class="content">刚做了个服务迁移，结果发现比预期想的事儿要多啊，不开心。。迁移后发现程序报错，提示缺少一大堆库文件。。。记忆里之前也解决过这个问题，搜了一下博客，竟然发现没有记录下来，那好吧，这次就补一下该内容。
其实一般碰到这种缺少库文件的问题时，没什么悬念，安装对应版本即可。所以我淡定的按照提示缺少的库名，进行了一轮安装：
1yum install -y at-spi2-atk libXcursor libX ...</div><a class="more" href="/2021/03/22/centos7下安装puppeteer/#more" style="margin-top: 14px">Read more</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2021/03/18/mail-listener下的IMAP ID怎么搞/">Mail-listener下的IMAP ID怎么搞？</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 3月 18 2021</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/nodejs/">nodejs</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/163邮箱/">163邮箱</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/unsafe-login/">unsafe_login</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/mail-listener/">mail-listener</a></span><div class="content">今天发现一直使用的nodejs的一个IMAP库，无法完成国内163邮箱的登录授权，会提示：

Unsafe Login. Please contact kefu@188.com for help

太讨厌了。然后一顿乱搜，原来是163邮箱在登录认证的时候，需要客户端携带特定的身份参数。文章后面的参考资料里提供了官方的解释以及另一个博主的分享。
不过可惜，这些资料里提供的demo都不是基于nodej ...</div><a class="more" href="/2021/03/18/mail-listener下的IMAP ID怎么搞/#more" style="margin-top: 14px">Read more</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2021/01/19/puppeteer如何下载pdf文件/">Puppeteer如何下载pdf文件</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 1月 19 2021</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/nodejs/">nodejs</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/puppeteer/">puppeteer</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/chrome/">chrome</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/devtools/">devtools</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/pdf/">pdf</a></span><div class="content">相信大家伙儿都清楚，访问一些常见的文件格式，浏览器是会“自作主张”的提供预览功能的，但有时候我们想直接下载到文件。尤其是在用puppeteer这种方式进行操作时，我们如何绕过浏览器的默认行为呢？
拿PDF文件来举个例子吧，因为chrome默认会使用内置的pdf viewer来直接预览文件，而浏览器进入到预览模式后其实上下文发生了切换，导致无法像操作普通页面那样来操作页面上的元素。此时，我们就需要必 ...</div><a class="more" href="/2021/01/19/puppeteer如何下载pdf文件/#more" style="margin-top: 14px">Read more</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/12/25/重新认识Innodb/">重新认识Innodb</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 12月 25 2020</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/数据库/">数据库</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/mysql/">mysql</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/innodb/">innodb</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/锁/">锁</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/事务/">事务</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/快照读/">快照读</a></span><div class="content">打从第一天上班开始，就在与Mysql打交道，当时也啃过几本评分很高的讲mysql的书。记得曾经看过书中讲的眼花缭乱的复杂sql后也跃跃欲试的想要在项目中大展拳脚，但转眼就被各种慢查询和数据不一致问题虐的体无完肤。经历过各种尴尬，看过不少前辈的分享后，发现其实常见的互联网项目，大量的逻辑可以很好的在应用代码这一侧就完成，不仅能保证效率，有利于维护，而且未来的优化空间对一般开发人员来说也比较大，不至于 ...</div><a class="more" href="/2020/12/25/重新认识Innodb/#more" style="margin-top: 14px">Read more</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/11/28/github更换认证方式后sourcetree的设置/">Github更换认证方式后sourcetree的设置</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 11月 28 2020</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/工具/">工具</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/github/">github</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/sourcetree/">sourcetree</a></span><div class="content">个人非常喜欢sourcetree这款git客户端工具，比较喜欢它的设计理念，即将所有功能都集成在同一个UI中，而不是散落在不同的菜单或文件夹里。不过之前一直用github的https协议来作为项目的git地址，sourcetree似乎对https协议的项目默认使用的认证授权方式就是账号密码。但是随着github近期调整了认证方式，不再允许第三方工具基于账号密码来访问和管理项目了，所以我在sourc ...</div><a class="more" href="/2020/11/28/github更换认证方式后sourcetree的设置/#more" style="margin-top: 14px">Read more</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/11/20/DDD学习摘录/">DDD读书摘录</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 11月 20 2020</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/架构/">架构</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/领域建模/">领域建模</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/微服务/">微服务</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/读写分离/">读写分离</a></span><div class="content">最近在复习 领域驱动设计 相关的知识，主要是因为越发的觉得DDD思想和方法论能帮助自己甄别好坏以及辅助设计。很早之前就读过DDD知识领域相关的“圣经”，但是初读时候并没有悟道太多，打算花时间再把能搜集到的资料整理一下看是否能沉淀更多价值出来。索性全部记录在这篇博文中，方便自己日后复习和查证。目前没有想好要以如何结构来编排内容，暂时都一股脑的记录下来，以后有好的归纳想法后再调整吧，如果觉得阅读起来很 ...</div><a class="more" href="/2020/11/20/DDD学习摘录/#more" style="margin-top: 14px">Read more</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/07/06/蝉/">蝉</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 7月 6 2020</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/talk/">talk</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/知了/">知了</a></span><div class="content">昨天做了一个非常刺激的梦，好像电影一样。我尝试把它写出来，并按照我希望的样子进行一点点加工，但90%的内容确实都是梦中的景象。这个故事，有一点恐怖，但留给我更多的是那种细思极恐的感觉，非常奇怪的是最近也没有看过惊悚片，可能大脑太渴望了，就自发的以梦的形式自己导演了一步。我不是很擅长写这种东西，但又非常想记录下它，所以可能叙事混乱，请见谅。
—————-正文分割线—————–

先介绍一下故事的主人 ...</div><a class="more" href="/2020/07/06/蝉/#more" style="margin-top: 14px">Read more</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/06/26/mapping set to strict, dynamic introduction of [_class] within [_doc] is not allowed/">Mapping Set to Strict, Dynamic Introduction of [_Class] Within [_Doc] Is Not Allowed</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 6月 26 2020</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/spring/">spring</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/elascticsearch7/">elascticsearch7+</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/spring-data-elasticsearch/">spring-data-elasticsearch</a></span><div class="content">这个异常非常的“有趣”，因为我GG了一圈，竟然一个相关的结果都没有。。。一开始以为自己碰到疑难杂症了，深呼吸一口打算去翻源码了。结果“非常不小心”被我在官方文档上以“_class”作为关键字检索到了相关的内容，好尴尬啊~
官方在Mapping Rules这一章节中，提到了Type Hints的概念：

Mapping uses type hints embedded in the document ...</div><a class="more" href="/2020/06/26/mapping set to strict, dynamic introduction of [_class] within [_doc] is not allowed/#more" style="margin-top: 14px">Read more</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/05/26/关于电商系统的搜索框/">关于电商系统的搜索框</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 5月 26 2020</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/需求分析/">需求分析</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/自动完成/">自动完成</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/自动提示/">自动提示</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/拼音转换/">拼音转换</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/简繁互转/">简繁互转</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/elasticsearch/">elasticsearch</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/分词/">分词</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/模糊查询/">模糊查询</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/拼写纠错/">拼写纠错</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/权重/">权重</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/热更新/">热更新</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/词库/">词库</a></span><div class="content">这将会是一篇概括类的文章，可能最终遗留的问题比解决的多得多~~不是很有自信推荐你看，但如果有空闲时间的话，不妨跟着我一起思考其中的相关问题！注意: 本文章对解决问题的思考篇幅多于实战，且许多问题的解决方案也停留在理论阶段，未必有足够合理的可实施性。之所以分享出来，仅仅在于怕遗忘或错过思考过程中的火花，若能给你带来好的灵感，纯属巧合，也是我的荣幸。如若能将你的高见分享于我，那就太棒了！
需求背景是源 ...</div><a class="more" href="/2020/05/26/关于电商系统的搜索框/#more" style="margin-top: 14px">Read more</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/04/23/关于积分的db设计之二/">关于积分的Db设计之二</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 4月 23 2020</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/数据库/">数据库</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/积分设计/">积分设计</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/有效期/">有效期</a></span><div class="content">继续积分这个话题，我们接着之前的那篇文章往下说。上一篇给了一个db的设计方案，也简单讨论了一下它的精妙与不足。那么，是否还可以有更好一些的db设计呢？
别着急，我们还是先来说业务。其实除了上一篇文章提到的那些规则外，我们的电商系统里，还有另外一个额外的小规则，由于比较另类，所以我放在这里才说，因为它也会对上面的那个db设计造成一定的问题。
我们的电商系统，在客户结算时并不提供一个输入框来给客户输入 ...</div><a class="more" href="/2020/04/23/关于积分的db设计之二/#more" style="margin-top: 14px">Read more</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/04/23/关于积分的db设计之一/">关于积分的Db设计之一</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 4月 23 2020</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/数据库/">数据库</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/积分设计/">积分设计</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/有效期/">有效期</a></span><div class="content">今天来讲一个业务场景及其对应的解决方案：用户积分！肯定不陌生，毕竟现在很多电商系统都提供积分功能。简单说一下我手里的电商项目中积分的相关规则：

下单会根据订单金额，奖励对应比例的积分
订单结算时，用户可以使用积分来按照比例抵扣现金消费
积分存在有效期，过期作废
用户可以查看自身的积分流水
用户可以查看当前可用积分总数

极其常规的业务逻辑，对吧~~这里延伸几点规则，算是基于上述规则的合理推导：
 ...</div><a class="more" href="/2020/04/23/关于积分的db设计之一/#more" style="margin-top: 14px">Read more</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/12/09/审批流程中的一个有趣的需求点/">审批流程中的一个有趣的需求点</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 12月 9 2019</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/需求分析/">需求分析</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/审批流程/">审批流程</a></span><div class="content">这篇文章，我们来讨论一个比较有趣的需求，可能曾经出现在你设计的系统中，又或者你见过类似的解决方案。不管怎样，我们抱着思考讨论的心态，一起来聊一下吧~
先来简单的描述一下目标功能的大概内容：我们的系统提供一个模块，该模块有3种用户类型：一线销售人员，销售经理，市场总监。该模块最基本的一个流程是：销售人员提前填写未来周的工作计划（7天），提交后先由自己部门经理审批，通过后再由市场总监审批，最终流程完结 ...</div><a class="more" href="/2019/12/09/审批流程中的一个有趣的需求点/#more" style="margin-top: 14px">Read more</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/12/09/go get 如何指定库的版本/">Go Get 如何指定库的版本</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 12月 9 2019</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/golang/">golang</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/go-get/">go get</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/版本/">版本</a></span><div class="content">最近修改了一个很早前写的程序，然后在一台新的服务器上进行发布。本以为仅仅改了个参数，直接编译就搞定的事儿，没想到尴尬了！一开始的报错，着实让人懵逼。后来翻看源码，才发现是依赖的第三方库有了不向下兼容的新版本~
然后继续天真的以为go get可以指定版本，可再次被打脸，才不可置信的发现原来老一点版本的golang，对包版本的管理真的很渣。查了一下资料，golang的包管理相关的解决方案也五花八门，我 ...</div><a class="more" href="/2019/12/09/go get 如何指定库的版本/#more" style="margin-top: 14px">Read more</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/10/28/它是如何知道请求来自于puppeteer的/">它是如何知道请求来自于Puppeteer的</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 10月 28 2019</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/nodejs/">nodejs</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/puppeteer/">puppeteer</a></span><div class="content">一直以来，在采集的道路上，都是puppeteer与我相伴，感觉无往不利，无坚不摧。但内心是知道总有一天，随着越来越规范，你使用puppeteer的目的会被限缩到固定范围的，毕竟它存在的意义是端到端测试。而我们拿来作为采集数据的工具来用，总不算是正路~哇哈
闲话不多说，我们快入主题，我最近发现之前一直work的采集程序最近突然失败了，然后经过一番排查，发现目标网站识别出请求是来自于非人类的，而拒绝登 ...</div><a class="more" href="/2019/10/28/它是如何知道请求来自于puppeteer的/#more" style="margin-top: 14px">Read more</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/08/23/基于AES和RSA来保护数据/">基于AES和RSA来保护数据</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 8月 23 2019</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/java/">java</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/对称加密/">对称加密</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/非对称加密/">非对称加密</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/非对称签名/">非对称签名</a></span><div class="content">今天来说一下加解密相关的内容~
在这个后Rest时代，基本上HTTP API已经满大街了，如果你还不了解这个细节，或者你的项目不提供Rest API，你都不好意思来看我这篇文章~~而通常我们简单的这些API，都不约儿童的包含了一个签名字段，主要目的是为了避免通信数据被恶意篡改，这也是https生而伟大的原因。
我们来进一步说一下这个签名逻辑：一般通信双方会提前约定好使用相同的一段字符串来作为签名的 ...</div><a class="more" href="/2019/08/23/基于AES和RSA来保护数据/#more" style="margin-top: 14px">Read more</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/08/22/谈puppeteer碰到的bug/">谈Puppeteer碰到的bug</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 8月 22 2019</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/nodejs/">nodejs</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/puppeteer/">puppeteer</a></span><div class="content">什么是puppeteer？直观点说，就是一个提供以编程的方式控制浏览器（chromium）的nodejs库，非常的彪悍。有了它，你可以用来做端到端测试，也可用来采集一些比较复杂的网站。我之前文章有涉及到这个神器，所以就不再啰嗦了~
这篇文章只是记录在使用中几个碰到的坑~
page.click 无限阻塞从官网手册上看，click函数在发现页面上没有对应的元素的时候，会报错。但我在实际使用的时候发现， ...</div><a class="more" href="/2019/08/22/谈puppeteer碰到的bug/#more" style="margin-top: 14px">Read more</a><hr></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image: url(/img/banner.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2014 - 2021 By kazaff</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>